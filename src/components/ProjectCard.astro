---
import type { CollectionEntry } from 'astro:content';
import { useTranslations } from '../i18n/utils';

interface Props {
  project: CollectionEntry<'projects'>;
  lang: 'en' | 'zh';
}

const { project, lang } = Astro.props;
const t = useTranslations(lang);

const { title, tags, metrics, techStack, roles, category } = project.data;
---

<a href={`/${lang}/projects/${project.slug}`} class="group block bg-gray-900 border border-gray-800 rounded-lg overflow-hidden hover:border-blue-500 transition-all hover:shadow-lg hover:shadow-blue-500/10">
  <div class="aspect-video bg-gray-800 relative overflow-hidden">
    {/* Placeholder for thumbnail - in real app would use project.data.image */}
    <div class="absolute inset-0 flex items-center justify-center text-gray-700 font-mono text-4xl group-hover:scale-105 transition-transform duration-500">
      {title.substring(0, 2).toUpperCase()}
    </div>
    <div class="absolute top-2 right-2 bg-black/80 backdrop-blur text-xs px-2 py-1 rounded text-gray-300 border border-gray-700">
      {t(`project.${category.toLowerCase()}` as any)}
    </div>
  </div>
  
  <div class="p-4">
    <h3 class="text-xl font-bold mb-2 group-hover:text-blue-400 transition-colors">{title}</h3>
    
    <div class="flex flex-wrap gap-2 mb-4">
      {roles.slice(0, 2).map(role => (
        <span class="text-xs bg-gray-800 text-gray-300 px-2 py-1 rounded border border-gray-700">
          {role}
        </span>
      ))}
    </div>

    <div class="flex justify-between items-end border-t border-gray-800 pt-3 mt-2">
      <div class="flex gap-2 text-gray-400">
        {techStack.map(tech => (
          <span class="text-xs" title={tech}>{tech}</span> 
          /* In real app, render icons here based on the string */
        ))}
      </div>
      
      <div class="text-right">
        {metrics?.hours && (
          <div class="text-sm font-mono text-blue-400">
            {metrics.hours}h <span class="text-gray-500 text-xs">{t('metric.hours')}</span>
          </div>
        )}
        {metrics?.sales && (
          <div class="text-sm font-mono text-green-400">
            {metrics.sales} <span class="text-gray-500 text-xs">{t('metric.sales')}</span>
          </div>
        )}
      </div>
    </div>
  </div>
</a>
